{% extends "base.html" %}
{% block content %}
<h2>Usluge</h2>

<form class="row g-3 mb-4" method="post" action="{{ url_for('dodaj_uslugu') }}">
    <div class="col-md-3"><input class="form-control" name="naziv" placeholder="Naziv" required></div>
    <div class="col-md-3"><input class="form-control" name="vrsta" placeholder="Vrsta" required></div>
    <div class="col-md-2"><input type="number" min="1" class="form-control" name="trajanje" placeholder="Trajanje (min)"
            required></div>
    <div class="col-md-2"><input type="number" min="0" class="form-control" name="cijena" placeholder="Cijena" required>
    </div>
    <div class="col-md-2"><button class="btn btn-primary w-100">Dodaj</button></div>
</form>

<table class="table table-striped">
    <thead>
        <tr>
            <th>ID</th>
            <th>Naziv</th>
            <th>Vrsta</th>
            <th>Trajanje</th>
            <th>Cijena</th>
            <th>Akcije</th>
        </tr>
    </thead>
    <tbody>
        {% for u in usluge %}
        <tr>
            <td>{{ u.id_usluge }}</td>
            <td>{{ u.naziv_usluge }}</td>
            <td>{{ u.vrsta_usluge }}</td>
            <td>{{ u.trajanje }} min</td>
            <td>{{ u.cijena }}</td>
            <td class="d-flex gap-2">
                <form method="post" action="{{ url_for('obrisi_uslugu', id=u.id_usluge) }}"
                    onsubmit="return confirm('Obrisati uslugu?')">
                    <button class="btn btn-sm btn-outline-danger">Obri≈°i</button>
                </form>
                <!-- inline update -->
                <button class="btn btn-sm btn-outline-secondary" type="button" data-bs-toggle="collapse"
                    data-bs-target="#edit{{u.id_usluge}}">Uredi</button>
            </td>
        </tr>
        <tr class="collapse" id="edit{{u.id_usluge}}">
            <td colspan="6">
                <form class="row g-2" method="post" action="{{ url_for('azuriraj_uslugu', id=u.id_usluge) }}">
                    <div class="col-md-3"><input class="form-control" name="naziv" value="{{ u.naziv_usluge }}"
                            required></div>
                    <div class="col-md-3"><input class="form-control" name="vrsta" value="{{ u.vrsta_usluge }}"
                            required></div>
                    <div class="col-md-2"><input type="number" class="form-control" name="trajanje"
                            value="{{ u.trajanje }}" required></div>
                    <div class="col-md-2"><input type="number" class="form-control" name="cijena" value="{{ u.cijena }}"
                            required></div>
                    <div class="col-md-2"><button class="btn btn-success w-100">Spremi</button></div>
                </form>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
{% endblock %}